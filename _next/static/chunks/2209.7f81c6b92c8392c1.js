"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2209],{8408:function(e,l,t){var o=t(5893);t(7294);var i=t(5675),n=t.n(i);l.Z=e=>{let{label:l,onClick:t,style:i={},icon:a,image:s,alt:r,className:d="",children:c,dataZoca:u,...v}=e;return(0,o.jsxs)("button",{className:"rounded-full px-6 py-2 ".concat(d),onClick:t,style:i,"data-zoca":u,...v,children:[(0,o.jsx)("span",{className:"whitespace-nowrap",children:l}),a&&(0,o.jsx)(n(),{src:a,alt:r||"icon",width:24,height:24,className:"ml-2 flex-shrink-0"}),s&&(0,o.jsx)(n(),{src:s,alt:r||"image",width:24,height:24,className:"flex-shrink-0"}),c]})}},2209:function(e,l,t){t.d(l,{h:function(){return M}});var o=t(5893),i=t(7294);let n=(0,i.createContext)(void 0);function a(e){var l;let{children:t,config:a,selectedService:s,websiteData:r,pagePath:d}=e,[c,u]=(0,i.useState)(0),v=(null==a?void 0:a.steps[0])||[],m=(0,i.useMemo)(()=>{var e;return null===(e=v.fields)||void 0===e?void 0:e.filter(e=>e.autoFill)},[v]),p=e=>(s&&(e.service={name:s.service,id:s.serviceId,price:s.servicePrice}),e),[x,f]=(0,i.useState)({values:{},errors:{},touched:{}}),[h,y]=(0,i.useState)(0),[b,g]=(0,i.useState)(!1),[j,N]=(0,i.useState)({}),[w,C]=(0,i.useState)(null),k=c===(null==a?void 0:null===(l=a.steps)||void 0===l?void 0:l.length)-1,S=0===c,T=(0,i.useRef)(null),E=(0,i.useRef)(x);(0,i.useEffect)(()=>{(()=>{if("undefined"!=typeof localStorage){let e=localStorage.getItem("formState");if(e){let l=JSON.parse(e),t={};null==m||m.forEach(e=>{var o,i;let n=null==e?void 0:null===(o=e.id)||void 0===o?void 0:o.split("_")[0];t[n]=(null===(i=l.values)||void 0===i?void 0:i[n])||""}),p(t),f({values:t,errors:{},touched:{}});return}}let e={};null==m||m.forEach(l=>{var t;e[null==l?void 0:null===(t=l.id)||void 0===t?void 0:t.split("_")[0]]=""}),p(e),f({values:e,errors:{},touched:{}})})()},[]),(0,i.useEffect)(()=>{E.current=x},[x]);let I=(0,i.useCallback)(()=>{let e=E.current;localStorage.setItem("formState",JSON.stringify(e))},[]),O=(0,i.useCallback)((e,l)=>{f(t=>{let{[e]:o,...i}=t.errors,n="phone"===e?l.replace(/-/g,""):l;return{...t,values:{...t.values,[e]:n},errors:i}}),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{I()},3e3)},[I]),F=(0,i.useCallback)(e=>{f(l=>({...l,touched:{...l.touched,[e]:!0}}))},[f]),_=(0,i.useCallback)(e=>{var l;let t=x.values[null==e?void 0:null===(l=e.id)||void 0===l?void 0:l.split("_")[0]];if(e.required&&(!t||""===t.trim()))return"This field is required";if("phone"===e.type){let l=null==t?void 0:t.replace(/\D/g,"");if(O(e.id.split("_")[0],l),!l)return;if(l.startsWith("1")||l.startsWith("0")){if(11!==l.length)return"Phone number starting with 1 must be 11 digits"}else if(10!==l.length)return"Phone number must be at least 10 digits";if(!/^\d+$/.test(l))return"Phone number must contain only digits"}if(e.validation){let{pattern:l,min:o,max:i,minLength:n,maxLength:a,customValidation:s}=e.validation;if(l&&!l.test(t))return"Invalid format";if("number"==typeof t){if(void 0!==o&&t<o)return"Minimum value is ".concat(o);if(void 0!==i&&t>i)return"Maximum value is ".concat(i)}if("string"==typeof t){if(void 0!==n&&t.length<n)return"Minimum length is ".concat(n);if(void 0!==a&&t.length>a)return"Maximum length is ".concat(a)}if(s)return s(t)}},[x.values,O]),R=(0,i.useCallback)(e=>{let l,t,o=!0;for(let i of e){let e=_(i);if(e&&!l){o=!1,l=e,t=i.id,f(l=>({...l,errors:{[i.id.split("_")[0]]:e},touched:{...l.touched,[i.id.split("_")[0]]:!0}}));break}}if(t){let e=document.getElementById(t);e&&e.focus()}return o},[f,_]),L=(0,i.useCallback)(()=>{k||u(e=>e+1)},[k]),D=(0,i.useCallback)(()=>{S||u(e=>e-1)},[S]),P={currentStepIndex:c,...x,handleChange:O,handleBlur:F,validateField:_,validateStep:R,nextStep:L,prevStep:D,isLastStep:k,isFirstStep:S,stepHeight:h,setStepHeight:y,isSubmitting:b,setIsSubmitting:g,saveFormState:I,websiteData:r,pagePath:d,selectedService:s,stepResponses:j,saveStepResponse:e=>{N(l=>({...l,[e.stepId]:e.response}))},getStepResponse:e=>j[e],selectedCategory:w,saveSelectedCategory:e=>{C(e)}};return(0,o.jsx)(n.Provider,{value:P,children:t})}let s=()=>{let e=(0,i.useContext)(n);if(!e)throw Error("useForm must be used within a FormProvider");return e};var r=t(1907),d=t(311),c=t(480);function u(e){var l,t,n;let{id:a,label:u,type:v="text",name:m,required:p,placeholder:x,icon:f,iconPosition:h="left",value:y,onChange:b,inputMode:g,autoFocus:j,styles:N,formType:w}=e,[C,k]=(0,i.useState)(!1),{values:S,handleChange:T,handleBlur:E,errors:I,touched:O}=s(),{trackEvent:F}=(0,d.X)(),_=null!=y?y:S[m]||"",R=O[m]?I[m]:void 0,L=""!==_,D=e=>{k(!1),E(m),F(c.w["CONTACTFORM_EXIT_".concat(m.toUpperCase())],{formType:w,inputValue:e.target.value})};return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"".concat("tel"!==v?"relative":""," flex-1 px-[1px]"),style:{color:null==N?void 0:N.color},children:[u&&!(null===(l=u.props)||void 0===l?void 0:l.isFloat)&&(0,o.jsxs)("label",{className:"mb-1 block text-sm font-medium text-[var(--text-variant5)]",style:{color:null==N?void 0:N.color},children:[u.text,p&&(0,o.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]}),(0,o.jsxs)("div",{className:"relative",children:[f&&(0,o.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 ".concat("left"===h?"left-3":"right-3"," pointer-events-none h-5 w-5 text-gray-400"),style:{color:null==N?void 0:N.color},children:r.Z[f]}),(0,o.jsx)("input",{type:v,id:a,value:_,onChange:null!=b?b:e=>T(m,e.target.value),onBlur:e=>D(e),onFocus:()=>{k(!0),F(c.w["CONTACTFORM_ENTER_".concat(m.toUpperCase())],{formType:w})},placeholder:(null==u?void 0:null===(t=u.props)||void 0===t?void 0:t.isFloat)?"":x+(p?" *":""),inputMode:g,className:(()=>{var e;let l="\n      peer\n      w-full\n      h-12\n      border\n      text-black\n      cursor-text\n      focus:outline-none\n      rounded-lg px-4 py-2 text-sm hover:bg-gray-50\n      ".concat(R?"border-red-500":"border-gray-300","\n      ").concat((C||L)&&(null==u?void 0:null===(e=u.props)||void 0===e?void 0:e.isFloat)?"pt-1":"","\n    ");return f?"".concat(l," ").concat("left"===h?"pl-10 pr-4":"pl-4 pr-10"):"".concat(l," px-4")})(),autoFocus:j,style:N,"data-zoca":"text-input-field-".concat(m),"aria-label":"".concat(null==u?void 0:u.text," input field")}),(null==u?void 0:null===(n=u.props)||void 0===n?void 0:n.isFloat)&&(0,o.jsxs)("label",{htmlFor:a,className:"\n    absolute\n    left-4\n    transition-all\n    duration-200\n    pointer-events-none\n\n    ".concat(f?"!left-10":"","\n    ").concat(C||L?"text-xs -top-2 text-[var(--text-variant4)] bg-white px-2":"text-s md:text-base top-1/2 -translate-y-1/2 text-[var(--text-variant5)] opacity-80 ","\n    ").concat(R?"text-red-500":"","\n  "),style:{color:null==N?void 0:N.color,backgroundColor:null==N?void 0:N.backgroundColor},children:[u.text,p&&(0,o.jsx)("span",{className:"ml-1 text-red-500",children:"*"})]})]}),R&&(0,o.jsx)("p",{className:"absolute left-0 right-0 mt-1 text-center text-xs text-red-500",children:R})]})})}var v=t(1322),m=t(2885);function p(e){let{id:l,label:t,name:n,required:a,styles:r,options:d=null}=e,[c,u]=(0,i.useState)(!1),{values:p,handleChange:x,handleBlur:f,errors:h,touched:y,selectedService:b}=s(),g=p[n]||"",j=y[n]?h[n]:void 0,N=(0,i.useCallback)(e=>null==d?void 0:d.find(l=>l.value===e),[d]);return(0,i.useEffect)(()=>{(null==b?void 0:b.serviceId)&&x(n,N(null==b?void 0:b.serviceId)||"")},[b]),(0,o.jsxs)("div",{className:"relative mb-4 px-[2px]",style:{color:null==r?void 0:r.color},children:[t&&(0,o.jsxs)("label",{htmlFor:l,className:"mb-1 block text-sm font-medium",children:[t,a&&(0,o.jsx)("span",{className:"ml-1 text-red-500","aria-hidden":"true",children:"*"})]}),(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsxs)("select",{id:l,name:n,value:(null==g?void 0:g.value)||(null==b?void 0:b.serviceId),"aria-label":"".concat(t," select field"),"aria-invalid":!!j,"aria-required":a,"aria-describedby":j?"".concat(l,"-error"):void 0,onChange:e=>{x(n,N(e.target.value)||"")},onBlur:()=>{u(!1),f(n)},defaultValue:null==b?void 0:b.serviceId,onFocus:()=>u(!0),className:"block h-12 w-full max-w-full cursor-pointer appearance-none overflow-clip rounded-md border px-4 pr-6 focus:border-transparent focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 ".concat(j?"border-red-500":""," "),style:r,children:[(0,o.jsxs)("option",{value:"",children:["Select ",n]}),null==d?void 0:d.map(e=>{let l=(0,v.aS)(null==e?void 0:e.price);return(0,o.jsxs)("option",{value:e.value,className:"max-w-full","data-zoca":m.X.SELECT_OPTION,children:[e.label," ",l?"(".concat(l,")"):""]},e.value)})]}),(0,o.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:(0,o.jsx)("svg",{className:"h-4 w-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",style:{color:null==r?void 0:r.color},children:(0,o.jsx)("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}),j&&(0,o.jsx)("p",{id:"".concat(l,"-error"),role:"alert",className:"absolute top-full mt-1 text-xs text-red-500",children:j})]})}var x=t(2294);function f(e){let{options:l,defaultCountry:t="US",onChange:n,className:a="",buttonClassName:r="",dropdownClassName:u="",optionClassName:v="",name:p,styles:f,formType:h}=e,[y,b]=(0,i.useState)(!1),{handleChange:g,values:j}=s(),[N,w]=(0,i.useState)(l.find(e=>e.code===t)),C=(0,i.useRef)(null),k=async()=>{let e=localStorage.getItem("formState");if(e){let t=JSON.parse(e).values;if(t&&t[p]){let e=l.find(e=>e.dialCode===t[p]);e&&(w(e),g(p,e.dialCode));return}}try{let e=localStorage.getItem("countryCode");if(!e){var o;let l=await fetch("".concat("https://api-staging.zoca.ai","/website/get-ip-details")),t=await l.json();(e=null==t?void 0:null===(o=t.data)||void 0===o?void 0:o.countryCode)&&"string"==typeof e&&localStorage.setItem("countryCode",e)}let t=l.find(l=>l.code===e);if(t)w(t),g(p,t.dialCode);else throw Error("Country not found")}catch(o){console.error("Error fetching user country:",o);let e=l.find(e=>e.code===t);w(e),g(p,null==e?void 0:e.dialCode)}};(0,i.useEffect)(()=>{k()},[]);let S=(0,i.useCallback)(e=>{C.current&&!C.current.contains(e.target)&&b(!1)},[]);(0,i.useEffect)(()=>(document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)),[S]);let T=(0,i.useCallback)(e=>{w(e),b(!1),null==n||n(e),g(p,e.dialCode)},[n,g,p]),E=e=>{T(e),I(c.w.CONTACTFORM_SELECT_PHONECOUNTRY,{formType:h,countryCode:e.dialCode,countryName:e.name})},{trackEvent:I}=(0,d.X)();return(0,o.jsxs)("div",{className:"relative inline-block ".concat(a),ref:C,style:{color:null==f?void 0:f.color},children:[(0,o.jsxs)("button",{type:"button",onClick:()=>b(!y),className:"flex w-full items-center justify-between rounded-lg border bg-white px-3 py-2 text-sm hover:opacity-80 focus:outline-none focus:ring-1 md:px-4 ".concat(r),style:f,"data-zoca":m.X.COUNTRY_SELECTOR_BUTTON,children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("span",{className:"text-xl",children:null==N?void 0:N.flag}),(0,o.jsx)("span",{className:"font-medium",children:null==N?void 0:N.dialCode})]}),(0,o.jsx)(x.Z,{className:"h-4 w-4"})]}),(0,o.jsx)("div",{className:"absolute bottom-[55%] left-0 right-0 z-50 mt-1 w-full divide-y overflow-y-auto rounded-lg border bg-white shadow-lg ".concat(u," ").concat(y?"block":"hidden"," ").concat(null==f?void 0:f.countrySelectorPlate),children:l.map(e=>(0,o.jsxs)("button",{type:"button",onClick:()=>E(e),className:"flex w-full items-center space-x-3 px-4 py-2 text-sm hover:opacity-60 ".concat((null==N?void 0:N.code)===e.code?"opacity-30":""," ").concat(v),children:[e.flag&&(0,o.jsx)("span",{className:"text-xl",children:e.flag}),e.dialCode&&(0,o.jsx)("span",{className:"!ml-auto",children:e.dialCode})]},e.code))})]})}let h=[{code:"IN",name:"India",dialCode:"+91",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"US",name:"United States",dialCode:"+1",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"GB",name:"United Kingdom",dialCode:"+44",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"CA",name:"Canada",dialCode:"+1",flag:"\uD83C\uDDE8\uD83C\uDDE6"}];function y(e){let{id:l,name:t,required:n,label:a,styles:r,placeholder:d,icon:c,iconPosition:v,autoFocus:m,formType:p}=e,{handleChange:x,values:y}=s(),[b,g]=(0,i.useState)(""),j=(0,i.useCallback)(e=>{let l=e.replace(/\D/g,""),t="";return t=l.startsWith("0")||l.startsWith("1")?(l=l.slice(0,11)).replace(/(\d)(\d{3})?(\d{3})?(\d{4})?/,(e,l,t,o,i)=>{let n=[];return l&&n.push(l),t&&n.push(t),o&&n.push(o),i&&n.push(i),n.join("-")}):(l=l.slice(0,10)).replace(/(\d{3})?(\d{3})?(\d{4})?/,(e,l,t,o)=>{let i=[];return l&&i.push(l),t&&i.push(t),o&&i.push(o),i.join("-")}),{parsedPhone:l,displayValue:t}},[]),N=(0,i.useCallback)(e=>{let{parsedPhone:l,displayValue:o}=j(e.target.value);x(t,l),g(o)},[j,x,t]);return i.useEffect(()=>{if(y[t]){let{displayValue:e}=j(y[t]);g(e)}},[j,t,y]),(0,o.jsx)("div",{className:"relative",children:(0,o.jsxs)("div",{className:"relative flex space-x-2",children:[(0,o.jsx)(f,{options:h,defaultCountry:"US",buttonClassName:"h-12 w-full",className:"w-[100px] px-[1px]",name:"".concat(t,"Country"),styles:r,formType:p}),(0,o.jsx)(u,{id:l,name:t,type:"tel",required:n,label:a,placeholder:d||"Phone number",value:b,onChange:N,inputMode:"numeric",styles:r||{},icon:c,iconPosition:v,autoFocus:m,formType:p})]})})}let b=e=>{let{id:l,name:t,label:i,checked:n,onChange:a,styles:s,value:r}=e;return(0,o.jsxs)("label",{htmlFor:l,className:"block flex-1 cursor-pointer p-2 py-3 text-center text-sm shadow-sm transition-colors ".concat(n?null==s?void 0:s.checkedStyles:null==s?void 0:s.uncheckedStyles),children:[(0,o.jsx)("input",{type:"radio",id:l,name:t,checked:n,onChange:a,className:"sr-only",value:r,"aria-label":"".concat(t," radio button"),"data-zoca":m.X.RADIO_BUTTON}),i]})},g=e=>{let{options:l,name:t,label:n,styles:a,formType:r}=e,{handleChange:u}=s(),[v,m]=(0,i.useState)("");(0,i.useEffect)(()=>{{let e=localStorage.getItem("formState");if(e){let l=JSON.parse(e).values;l&&l.firstName&&m("returning")}}},[]);let{trackEvent:p}=(0,d.X)();(0,i.useEffect)(()=>{v&&u(t,v)},[u,t,v]);let x=e=>{m(e),u(t,e),p(c.w.CONTACTFORM_SELECT_CUSTOMERTYPE,{formType:r,customerType:e})};return(0,o.jsxs)("div",{children:[n&&(0,o.jsx)("label",{className:"".concat(null==a?void 0:a.labelStyles),children:n.text}),(0,o.jsx)("div",{className:"!mt-3 flex w-full flex-row gap-4",children:null==l?void 0:l.map(e=>(0,o.jsx)(b,{id:e.id||e.value,name:t,label:e.label,checked:e.value===v,onChange:e=>x(e.target.value),styles:a,value:e.value},e.id))})]})};function j(e){var l,t,i,n;let{field:a,formFieldStyles:r,nextField:d,formType:c}=e,{websiteData:v,pagePath:m}=s();if((null===(l=a.layout)||void 0===l?void 0:l.type)==="row"&&(null==d?void 0:null===(t=d.layout)||void 0===t?void 0:t.type)==="row"&&a.layout.group===d.layout.group)return(0,o.jsxs)("div",{className:"flex w-full flex-row gap-4 last:flex-1",children:[N(a,c,null==r?void 0:r[a.type]),N(d,c,null==r?void 0:r[d.type])]});switch(a.type){case"radio":return(0,o.jsx)(g,{formType:c,...a,styles:null==r?void 0:r.radio});case"select":return(0,o.jsx)(p,{id:a.id,label:null===(i=a.label)||void 0===i?void 0:i.text,name:a.name,required:a.required,options:(null==a?void 0:null===(n=a.options)||void 0===n?void 0:n.length)?a.options:w(v),styles:(null==r?void 0:r.select)||{}});case"phone":return(0,o.jsx)(y,{id:a.id,name:a.name,required:a.required,styles:(null==r?void 0:r.phone)||{},placeholder:a.placeholder,label:a.label,icon:a.icon,iconPosition:a.iconPosition||"left",autoFocus:a.autoFocus,formType:c});case"text":case"email":case"date":return(0,o.jsx)(u,{id:a.id,label:a.label,name:a.name,type:a.type,required:a.required,placeholder:a.placeholder,icon:a.icon,iconPosition:a.iconPosition||"left",autoFocus:a.autoFocus,styles:(null==r?void 0:r[a.type])||{},formType:c});default:return null}}let N=(e,l,t)=>(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(u,{id:e.id,label:e.label,name:e.name,type:e.type,required:e.required,placeholder:e.placeholder,icon:e.icon,iconPosition:e.iconPosition||"left",autoFocus:e.autoFocus,styles:t||{},formType:l})}),w=e=>{var l;return((null==e?void 0:null===(l=e.templateProps)||void 0===l?void 0:l.categories)||[]).flatMap(e=>e.services).map(e=>({label:e.name,value:e.id,...e}))};var C=t(8425),k=t(2150);function S(e){var l,t,n;let{step:a,styles:r,formType:d}=e,c=(0,i.useRef)(null),{currentStepIndex:u,setStepHeight:v,stepHeight:p}=s();return(0,i.useEffect)(()=>{c.current&&0===u&&v(c.current.offsetHeight)},[u,v]),(0,o.jsxs)("div",{ref:c,style:{minHeight:0===u?"auto":"".concat(p,"px")},children:[(null==a?void 0:a.title)&&(0,o.jsx)(C.Z,{as:"h3",className:"mb-4 text-xl font-bold text-black ".concat(null!==(l=null==r?void 0:r.titleClass)&&void 0!==l?l:""),dataZoca:m.X.FORM_STEP_TITLE,children:null==a?void 0:a.title}),(null==a?void 0:a.description)&&(0,o.jsx)(k.Z,{className:"mb-6 !text-base leading-5 text-black ".concat(null!==(t=null==r?void 0:r.descriptionClass)&&void 0!==t?t:""),children:null==a?void 0:a.description}),(0,o.jsx)("form",{className:"space-y-8 pb-[2px] ".concat(null!==(n=null==r?void 0:r.fieldWrapperClass)&&void 0!==n?n:""),children:null==a?void 0:a.fields.map((e,l)=>{var t,i,n,s,c,u,v;return l>0&&(null===(t=e.layout)||void 0===t?void 0:t.type)==="row"&&e.layout.group===(null==a?void 0:null===(i=a.fields[l-1].layout)||void 0===i?void 0:i.group)?null:(0,o.jsx)(j,{field:e,nextField:(null===(n=e.layout)||void 0===n?void 0:n.type)==="row"&&(null==a?void 0:null===(c=a.fields[l+1])||void 0===c?void 0:null===(s=c.layout)||void 0===s?void 0:s.type)==="row"&&e.layout.group===(null==a?void 0:null===(v=a.fields[l+1])||void 0===v?void 0:null===(u=v.layout)||void 0===u?void 0:u.group)?null==a?void 0:a.fields[l+1]:void 0,formFieldStyles:null==r?void 0:r.formFieldStyles,formType:d},e.id||l)})})]})}var T=t(1163);let E=()=>{let e=(0,T.useRouter)(),l=e=>(null==e?void 0:e.startsWith("http://"))||(null==e?void 0:e.startsWith("https://"))||e.includes(".");return{handleNavigation:t=>{t&&(l(t)?window.location.href=t:e.push(t))},query:null==e?void 0:e.query}};var I=t(8408),O=t(3940);let F={offer:function(e){let{title:l,description:t}=e;return(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4",children:l}),t&&(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:t}),(0,o.jsxs)("div",{className:"p-6 rounded-lg mb-6",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Thank You!"}),(0,o.jsx)("p",{className:"mb-4",children:"Your form has been successfully submitted."})]}),(0,o.jsx)("button",{onClick:()=>console.log("Final Form Data:"),className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Close"})]})},thankYou:function(e){var l,t,n;let[a,s]=(0,i.useState)(((null==e?void 0:null===(l=e.redirect)||void 0===l?void 0:l.delay)||3e3)/1e3),{handleNavigation:r}=E(),u=localStorage.getItem("formState"),v=u?JSON.parse(u):null,p=(null==v?void 0:null===(t=v.values)||void 0===t?void 0:t.customerType)==="returning",{redirect:x,title:f,secondaryTitle:h,message:y,reviewTitle:b,reviewDescription:g,bookingLink:j,styles:N,reviewLink:w,bookingPageRedirection:C}=e,k=(null==x?void 0:x.btnText)||"Write a Review on Google",{trackEvent:S}=(0,d.X)(),T=e=>{e?(r(e),S(c.w.CONTACTFORM_REDIRECT_BOOKINGLINK,{bookingLink:e,navigationType:"click-redirect"})):r((null==x?void 0:x.url)||"")};(0,i.useEffect)(()=>{let e;return(null==x?void 0:x.url)&&p&&(e=setTimeout(()=>{(null==x?void 0:x.url)&&r(null==x?void 0:x.url)},(null==x?void 0:x.delay)||3e3)),()=>{clearTimeout(e)}},[r,p,null==x?void 0:x.delay,null==x?void 0:x.url]),(0,i.useEffect)(()=>{let e;return a>0?e=setTimeout(()=>{s(e=>e-1)},1e3):j?S(c.w.CONTACTFORM_REDIRECT_BOOKINGLINK,{bookingLink:j,navigationType:"auto-redirect"}):S(c.w.CONTACTFORM_REDIRECT_BOOKINGLINK,{bookingLink:j,navigationType:"no-booking-link"}),()=>{clearTimeout(e)}},[a]),(0,i.useEffect)(()=>{let e=document.querySelector('[data-close-modal-name="close-modal"]');j&&e&&(e.style.display="none")},[j]);let F=(null==x?void 0:x.url)||j;(0,i.useEffect)(()=>{let e;return F&&(e=setTimeout(()=>{r(F);let e=document.querySelector('[data-close-modal-name="close-modal"]');e&&(e.style.display="block",e.style.opacity="0",e.click(),e.style.display="none")},(null==x?void 0:x.delay)||3e3)),()=>{clearTimeout(e)}},[F,r,null==x?void 0:x.delay]);let _=w&&p&&!j,R=w||(null==x?void 0:x.url)||null;return(0,o.jsxs)("div",{className:"flex min-h-full w-full flex-col items-center justify-center bg-white",children:[(0,o.jsxs)("svg",{className:"h-20 w-20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("circle",{className:"animate-circle",cx:"12",cy:"12",r:"10",stroke:"black",strokeWidth:"2",strokeLinecap:"round"}),(0,o.jsx)("path",{className:"animate-tick",d:"M8 12.5L10.5 15L16 9",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,o.jsx)(O.ll,{title:"".concat(f||"Thank you",", ").concat((null==v?void 0:null===(n=v.values)||void 0===n?void 0:n.firstName)||"","!"),className:"!mt-2 !pl-0 text-center text-2xl text-black",dataZoca:m.X.THANK_YOU_TITLE}),(0,o.jsx)(O.SZ,{className:"text-center text-xl leading-[1.2] text-black",children:h||"Your booking request has been received"}),(0,o.jsxs)(O.SZ,{className:"text-center text-sm text-black",children:[j&&(0,o.jsxs)(o.Fragment,{children:[a>0&&(0,o.jsxs)("span",{className:"",children:["Redirecting you to the booking page in"," ",(0,o.jsx)("span",{className:"text-lg font-bold",children:a})," seconds"]}),(0,o.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,o.jsx)(I.Z,{label:(null==C?void 0:C.buttonText)||"Go to Booking Platform",onClick:()=>T(j),className:"mt-6 flex flex-row-reverse items-center justify-between gap-2 !rounded-lg bg-black py-4 text-white"})})]}),!j&&p&&(0,o.jsx)(O.SZ,{className:"text-center text-sm text-black",children:y})]}),_&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(O.SZ,{className:"text-center text-black",children:[(0,o.jsx)("span",{className:"mb-2 mt-4 inline-block text-lg font-bold leading-[1]",children:b||"Write a Review on Google"}),(0,o.jsx)("br",{}),(0,o.jsx)("span",{className:"inline-block text-sm leading-[1.3] text-black",children:g||"We would love to hear your feedback on your recent experience with us"})]}),(0,o.jsx)(I.Z,{image:"https://ik.imagekit.io/zoca/stock/media_bank/googleLogo.png",label:k||"Write a Review on Google",onClick:()=>{R&&r(R)},className:"mt-4 flex flex-row-reverse items-center justify-between gap-2 !rounded-lg bg-[#4285F4] py-3 text-white"})]})]})},categoryListing:function(e){var l,t;let{stepData:n}=e,{description:a}=n||{},{websiteData:r,saveSelectedCategory:u,selectedCategory:v}=s(),m=localStorage.getItem("formState"),p=m?JSON.parse(m):null,{trackEvent:x}=(0,d.X)(),f=(0,i.useMemo)(()=>{var e;return null==r?void 0:null===(e=r.templateProps)||void 0===e?void 0:e.categories},[r]);if(!f||0===f.length||!a)return console.warn("No categories or description available"),null;let h=e=>{"OTHERS"===e?u("OTHERS"):u({category:e.name,categoryId:e.id}),x(c.w.CONTACTFORM_SELECT_CATEGORY,{category:e.name,categoryId:e.id})};return(0,o.jsxs)("div",{children:[(0,o.jsx)(k.Z,{className:"mb-4 text-3xl font-bold text-black",children:a.replace("{{firstName}}",(null==p?void 0:null===(l=p.values)||void 0===l?void 0:l.firstName[0].toUpperCase())+(null==p?void 0:null===(t=p.values)||void 0===t?void 0:t.firstName.slice(1))||"")}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-3 p-1",children:[null==f?void 0:f.slice(0,6).map(e=>(0,o.jsx)("span",{className:"flex cursor-pointer items-center rounded-md bg-gray-100 px-4 py-3 !text-sm text-gray-600 ".concat((null==v?void 0:v.categoryId)===e.id?"outline outline-gray-600":"hover:bg-gray-200"),onClick:()=>h(e),children:e.name},e.id)),(null==f?void 0:f.length)>6&&(0,o.jsx)("span",{onClick:()=>h("OTHERS"),className:"flex cursor-pointer items-center justify-center rounded-md bg-gray-100 px-4 py-3 text-sm text-gray-600 ".concat("OTHERS"===v?"outline outline-gray-600":"hover:bg-gray-200"),children:"Others"})]})]})}};function _(e){let{step:l,styles:t,nextStep:i,formType:n}=e,{stepHeight:a,websiteData:r}=s(),d=(0,T.useRouter)();if((null==l?void 0:l.type)==="component"){var c,u;let e=F[null==l?void 0:l.component];return d.asPath.includes("/services")&&(null==l?void 0:l.component)==="categoryListing"&&i?(i(),null):e?(0,o.jsx)("div",{style:{minHeight:"".concat(a,"px")},className:"flex h-full",children:(0,o.jsx)(e,{stepData:l,...l.props,bookingLink:null==r?void 0:null===(c=r.location)||void 0===c?void 0:c.bookingLink,reviewLink:null==r?void 0:null===(u=r.location)||void 0===u?void 0:u.reviewLink,styles:t})}):(console.error("Component ".concat(null==l?void 0:l.component," not found in registry")),(0,o.jsx)("div",{children:"Component not found"}))}return(0,o.jsx)(S,{step:l,styles:t,formType:n})}let R={submitLeadForm:v.j4,redirectToGBP:v.lx,updateBookingEnquiry:v.EY};function L(e){let{className:l="",style:t}=e;return(0,o.jsx)("div",{className:"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-current border-r-transparent shadow-lg motion-reduce:animate-[spin_1.5s_linear_infinite] ".concat(l),role:"status",style:{...t},children:(0,o.jsx)("span",{className:"!absolute !-m-px !h-px !w-px !overflow-hidden !whitespace-nowrap !border-0 !p-0 ![clip:rect(0,0,0,0)]",children:"Loading..."})})}var D=t(1664),P=t.n(D);function Z(e){var l,t,i,n,a,r,d,c,u,v,m;let{config:p,primaryButtonElement:x,secondaryButtonElement:f,styles:h,formType:y,mixpanelEvents:b}=e,{currentStepIndex:g,nextStep:j,prevStep:N,isFirstStep:w,isLastStep:C,validateStep:S,stepHeight:T,values:I,isSubmitting:O,setIsSubmitting:F,saveFormState:D,websiteData:Z,pagePath:M,saveStepResponse:B,getStepResponse:A,selectedCategory:U}=s(),{query:z}=E(),W=null==p?void 0:p.steps[g],X={formType:y,templateName:null==Z?void 0:null===(l=Z.templateProps)||void 0===l?void 0:l.name,websiteId:null==Z?void 0:null===(t=Z.website)||void 0===t?void 0:t.id,templateId:null==Z?void 0:null===(i=Z.templateProps)||void 0===i?void 0:i.templateId,bizName:null==Z?void 0:null===(n=Z.location)||void 0===n?void 0:n.bizName,...b},G=async e=>{if(!e||!e.length)return!0;try{for(let t of e){var l;if("nextStep"===t||"prevStep"===t)continue;let e=R[t];if(!e)return console.error("Action ".concat(t," not found in registry")),!1;let o=await e(I,null==Z?void 0:null===(l=Z.location)||void 0===l?void 0:l.locationId,z,X,null==p?void 0:p.steps.length,A(g-1+""),U);B({stepId:g.toString(),response:o}),(null==o?void 0:o.success)||console.error("Action ".concat(t," failed"))}return!0}catch(e){return console.error("Error executing actions:",e),!1}},H=async e=>{var l,t;e&&(await G(e.onClick)||console.error("Actions failed"),(null===(l=e.onClick)||void 0===l?void 0:l.includes("nextStep"))&&!C?j():(null===(t=e.onClick)||void 0===t?void 0:t.includes("prevStep"))&&!w&&N())},Y=async()=>{var e,l,t;if((null==W?void 0:W.type)==="form"&&!S(null==W?void 0:W.fields))return;let o=null==W?void 0:null===(e=W.buttons)||void 0===e?void 0:e.primary;if((null==o?void 0:null===(l=o.onClick)||void 0===l?void 0:l.includes("submitLeadForm"))||(null==o?void 0:null===(t=o.onClick)||void 0===t?void 0:t.includes("nextStep"))){F(!0);try{D(),await H(o)}finally{F(!1)}}else await H(o)},K=async()=>{var e;let l=null==W?void 0:null===(e=W.buttons)||void 0===e?void 0:e.secondary;await H(l)};return(0,o.jsxs)("div",{className:"flex h-full flex-col",style:{minHeight:T},children:[O&&(0,o.jsx)("div",{className:"absolute inset-0 z-10 flex h-full w-full items-center justify-center bg-black/50 backdrop-blur-[1px]",children:(0,o.jsx)(L,{className:"h-8 w-8 text-blue-500",style:{color:null==h?void 0:null===(a=h.loader)||void 0===a?void 0:a.color}})}),(0,o.jsx)("div",{className:"flex-1 ".concat((null==W?void 0:W.id)==="category_listing"?"pt-8":""),style:{transition:"0.3s ease-in-out"},children:(0,o.jsx)(_,{step:W,formType:null==p?void 0:p.id,styles:h,nextStep:j})}),(0,o.jsx)(q,{currentStep:W,isSubmitting:O,isFirstStep:w,isLastStep:C,onBackClick:K,onNextClick:Y,primaryButtonElement:x,secondaryButtonElement:f}),(null==W?void 0:W.additionalInfo)&&"services"!==M&&(0,o.jsxs)("div",{className:"mt-2 flex justify-center gap-2 text-center text-black",children:[(0,o.jsx)(k.Z,{variant:"base",children:null==W?void 0:null===(r=W.additionalInfo)||void 0===r?void 0:r.text}),(0,o.jsx)(P(),{href:null==W?void 0:null===(c=W.additionalInfo)||void 0===c?void 0:null===(d=c.secondaryCta)||void 0===d?void 0:d.href,"data-zoca":"".concat(null==W?void 0:null===(u=W.additionalInfo)||void 0===u?void 0:u.text,"-info-link"),children:null==W?void 0:null===(m=W.additionalInfo)||void 0===m?void 0:null===(v=m.secondaryCta)||void 0===v?void 0:v.text})]})]})}function M(e){let{config:l,primaryButtonElement:t,secondaryButtonElement:i,styles:n,websiteData:s,pagePath:r,formType:d,mixpanelEvents:c,selectedService:u}=e;return(0,o.jsx)(a,{config:l,selectedService:u,websiteData:s,pagePath:r,children:(0,o.jsx)(Z,{config:l,primaryButtonElement:t,secondaryButtonElement:i,styles:n,formType:d,mixpanelEvents:c,selectedService:u})})}let B=e=>{let{onClick:l,disabled:t,isLoading:i,variant:n,children:a}=e;return(0,o.jsxs)("button",{onClick:l,disabled:t,className:"".concat("w-full rounded px-4 disabled:opacity-50"," ").concat({primary:"bg-black px-4 py-3 text-lg text-white",secondary:"absolute top-5 left-6 md:left-8 !w-6 !h-6 !px-0 hover:bg-gray-50"}[n]," flex-1"),children:[(0,o.jsx)("span",{className:i?"invisible":"",children:a}),i&&(0,o.jsx)("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:(0,o.jsx)(L,{className:"h-5 w-5 border-white"})})]})},q=e=>{var l,t,n,a,s,r,d,c,u,v,m,p;let{currentStep:x,isSubmitting:f,isFirstStep:h,isLastStep:y,onBackClick:b,onNextClick:g,primaryButtonElement:j,secondaryButtonElement:N}=e,w={primary:{text:"Submit",visibility:!0},secondary:{text:"Previous",visibility:!h}},C=(null==x?void 0:null===(l=x.buttons)||void 0===l?void 0:l.secondary)&&((null==x?void 0:null===(n=x.buttons)||void 0===n?void 0:null===(t=n.secondary)||void 0===t?void 0:t.visibility)===void 0||(null==x?void 0:null===(s=x.buttons)||void 0===s?void 0:null===(a=s.secondary)||void 0===a?void 0:a.visibility)===!0),k={primary:(null==x?void 0:null===(r=x.buttons)||void 0===r?void 0:r.primary)&&((null==x?void 0:null===(c=x.buttons)||void 0===c?void 0:null===(d=c.primary)||void 0===d?void 0:d.visibility)===void 0||(null==x?void 0:null===(v=x.buttons)||void 0===v?void 0:null===(u=v.primary)||void 0===u?void 0:u.visibility)===!0)?{...w.primary,...null==x?void 0:null===(m=x.buttons)||void 0===m?void 0:m.primary}:null,secondary:C?{...w.secondary,...null==x?void 0:null===(p=x.buttons)||void 0===p?void 0:p.secondary}:null};return(null==k?void 0:k.primary)||(null==k?void 0:k.secondary)?(0,o.jsxs)("div",{className:"mt-6 flex w-full justify-between gap-8 self-end",children:[(null==k?void 0:k.secondary)&&N?i.cloneElement(N,{onClick:b,disabled:f,isLoading:f,children:k.secondary.text}):(null==k?void 0:k.secondary)&&(0,o.jsx)(B,{onClick:b,disabled:f,variant:"secondary",children:k.secondary.text}),(null==k?void 0:k.primary)&&j?i.cloneElement(j,{onClick:g,disabled:f,isloading:f.toString(),children:k.primary.text}):(null==k?void 0:k.primary)&&(0,o.jsx)(B,{onClick:g,disabled:f,isLoading:f,variant:"primary",children:k.primary.text})]}):null}},1907:function(e,l,t){t.d(l,{Z:function(){return c}});var o=t(5893);t(7294);var i=t(8689),n=t(73),a=t(3950),s=t(1263),r=t(6019),d=t(5346);let c={phone:(0,o.jsx)(i.Z,{}),email:(0,o.jsx)(n.Z,{}),user:(0,o.jsx)(a.Z,{}),calendar:(0,o.jsx)(s.Z,{}),facebook:(0,o.jsx)(d.Am9,{className:"h-6 w-6"}),instagram:(0,o.jsx)(d.Zf_,{className:"h-6 w-6"}),yelp:(0,o.jsx)(d.Uzy,{className:"h-6 w-6"}),youtube:(0,o.jsx)(d.V2E,{className:"h-6 w-6"}),pinterest:(0,o.jsx)(d.oIN,{className:"h-6 w-6"}),reddit:(0,o.jsx)(d.hrS,{className:"h-6 w-6"}),whatsapp:(0,o.jsx)(d.xpo,{className:"h-6 w-6"}),snapchat:(0,o.jsx)(d.QTF,{className:"h-6 w-6"}),linkedin:(0,o.jsx)(d.ltd,{className:"h-6 w-6"}),twitter:(0,o.jsx)(d.fWC,{className:"h-6 w-6"}),tiktok:(0,o.jsx)(d.nTm,{className:"h-6 w-6"}),others:(0,o.jsx)(r.Z,{className:"h-6 w-6"})}}}]);